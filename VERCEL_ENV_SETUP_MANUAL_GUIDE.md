# üîß ‡∏Ñ‡∏π‡πà‡∏°‡∏∑‡∏≠‡πÄ‡∏û‡∏¥‡πà‡∏° Environment Variables ‡πÉ‡∏ô Vercel

## ‚ö†Ô∏è ‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏ó‡∏µ‡πà‡∏û‡∏ö

- www.chiangmaiusedcar.com/api/ping ‚Üí 500 Error
- ‡∏™‡∏≤‡πÄ‡∏´‡∏ï‡∏∏: **‡πÑ‡∏°‡πà‡∏°‡∏µ Environment Variables ‡πÉ‡∏ô Vercel Project**

## ‚úÖ ‡∏ß‡∏¥‡∏ò‡∏µ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç (‡∏ó‡∏≥‡πÉ‡∏ô Vercel Dashboard)

### ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ó‡∏µ‡πà 1: ‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà Vercel Dashboard

1. ‡πÄ‡∏õ‡∏¥‡∏î https://vercel.com
2. Login ‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö
3. ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å project **chiangmaiusedcar-next**

### ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ó‡∏µ‡πà 2: ‡πÄ‡∏õ‡∏¥‡∏î‡∏´‡∏ô‡πâ‡∏≤ Environment Variables

1. ‡∏Ñ‡∏•‡∏¥‡∏Å‡πÅ‡∏ó‡πá‡∏ö **Settings** (‡∏î‡πâ‡∏≤‡∏ô‡∏ö‡∏ô)
2. ‡πÄ‡∏•‡∏∑‡πà‡∏≠‡∏ô‡∏•‡∏á‡∏´‡∏≤‡πÄ‡∏°‡∏ô‡∏π **Environment Variables** (‡∏î‡πâ‡∏≤‡∏ô‡∏ã‡πâ‡∏≤‡∏¢)
3. ‡∏Ñ‡∏•‡∏¥‡∏Å‡πÄ‡∏Ç‡πâ‡∏≤‡πÑ‡∏õ

### ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ó‡∏µ‡πà 3: ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£‡∏ó‡∏µ‡∏•‡∏∞‡∏ï‡∏±‡∏ß

**‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç:** ‡∏ó‡∏∏‡∏Å‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£‡πÄ‡∏•‡∏∑‡∏≠‡∏Å Environment = **Production** ‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô

#### 1. Shopify Configuration

**Key:** `SHOPIFY_DOMAIN`  
**Value:** `kn-goodcar.com`  
**Environment:** Production  
‡∏Ñ‡∏•‡∏¥‡∏Å **Add**

---

**Key:** `SHOPIFY_STOREFRONT_TOKEN`  
**Value:** `bb70cb008199a94b83c98df0e45ada67`  
**Environment:** Production  
‡∏Ñ‡∏•‡∏¥‡∏Å **Add**

---

#### 2. Admin Authentication

**Key:** `ADMIN_USERNAME`  
**Value:** `kngoodcar`  
**Environment:** Production  
‡∏Ñ‡∏•‡∏¥‡∏Å **Add**

---

**Key:** `ADMIN_PASSWORD`  
**Value:** `Kn-goodcar**5277`  
**Environment:** Production  
‡∏Ñ‡∏•‡∏¥‡∏Å **Add**

---

**Key:** `SESSION_SECRET`  
**Value:** `production-secret-chiangmai-2025-rotate-regularly`  
**Environment:** Production  
‡∏Ñ‡∏•‡∏¥‡∏Å **Add**

---

#### 3. Site Configuration

**Key:** `SITE_URL`  
**Value:** `https://www.chiangmaiusedcar.com`  
**Environment:** Production  
‡∏Ñ‡∏•‡∏¥‡∏Å **Add**

---

**Key:** `NEXT_PUBLIC_SITE_URL`  
**Value:** `https://www.chiangmaiusedcar.com`  
**Environment:** Production  
‡∏Ñ‡∏•‡∏¥‡∏Å **Add**

---

#### 4. EmailJS (Optional - ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ü‡∏≠‡∏£‡πå‡∏°‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠)

**Key:** `NEXT_PUBLIC_EMAILJS_SERVICE_ID`  
**Value:** `service_qlcksif`  
**Environment:** Production  
‡∏Ñ‡∏•‡∏¥‡∏Å **Add**

---

**Key:** `NEXT_PUBLIC_EMAILJS_TEMPLATE_ID`  
**Value:** `template_zd6e3f6`  
**Environment:** Production  
‡∏Ñ‡∏•‡∏¥‡∏Å **Add**

---

**Key:** `NEXT_PUBLIC_EMAILJS_PUBLIC_KEY`  
**Value:** `P3wnNJB_Y_PddrdBJ`  
**Environment:** Production  
‡∏Ñ‡∏•‡∏¥‡∏Å **Add**

---

### ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ó‡∏µ‡πà 4: Redeploy

‡∏´‡∏•‡∏±‡∏á‡∏à‡∏≤‡∏Å‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£‡∏Ñ‡∏£‡∏ö‡πÅ‡∏•‡πâ‡∏ß:

1. ‡πÑ‡∏õ‡∏ó‡∏µ‡πà‡πÅ‡∏ó‡πá‡∏ö **Deployments**
2. ‡∏´‡∏≤ deployment ‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î (commit `42b06c3` - "chore: add porting checklist...")
3. ‡∏Ñ‡∏•‡∏¥‡∏Å‡∏ó‡∏µ‡πà deployment ‡∏ô‡∏±‡πâ‡∏ô
4. ‡∏Ñ‡∏•‡∏¥‡∏Å‡∏õ‡∏∏‡πà‡∏° **"Redeploy"** (‡∏õ‡∏∏‡πà‡∏° 3 ‡∏à‡∏∏‡∏î‡∏î‡πâ‡∏≤‡∏ô‡∏Ç‡∏ß‡∏≤‡∏ö‡∏ô ‚Üí Redeploy)
5. ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å **"Use existing Build Cache"** (‡πÄ‡∏£‡πá‡∏ß‡∏Å‡∏ß‡πà‡∏≤)
6. ‡∏Ñ‡∏•‡∏¥‡∏Å **Redeploy**

### ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ó‡∏µ‡πà 5: ‡∏£‡∏≠‡πÅ‡∏•‡∏∞‡∏ó‡∏î‡∏™‡∏≠‡∏ö

1. ‡∏£‡∏≠ 2-3 ‡∏ô‡∏≤‡∏ó‡∏µ ‡πÉ‡∏´‡πâ Vercel deploy ‡πÄ‡∏™‡∏£‡πá‡∏à
2. ‡∏î‡∏π‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡πÉ‡∏ô Deployments tab ‡∏à‡∏ô‡πÄ‡∏´‡πá‡∏ô **"Ready"**
3. ‡∏ó‡∏î‡∏™‡∏≠‡∏ö:

```powershell
# PowerShell command
Invoke-WebRequest -Uri "https://www.chiangmaiusedcar.com/api/ping" -UseBasicParsing

# Should return:
# StatusCode: 200
# Content: pong
```

---

## üìã Checklist

- [ ] ‡πÄ‡∏û‡∏¥‡πà‡∏° SHOPIFY_DOMAIN
- [ ] ‡πÄ‡∏û‡∏¥‡πà‡∏° SHOPIFY_STOREFRONT_TOKEN
- [ ] ‡πÄ‡∏û‡∏¥‡πà‡∏° ADMIN_USERNAME
- [ ] ‡πÄ‡∏û‡∏¥‡πà‡∏° ADMIN_PASSWORD
- [ ] ‡πÄ‡∏û‡∏¥‡πà‡∏° SESSION_SECRET
- [ ] ‡πÄ‡∏û‡∏¥‡πà‡∏° SITE_URL
- [ ] ‡πÄ‡∏û‡∏¥‡πà‡∏° NEXT_PUBLIC_SITE_URL
- [ ] ‡πÄ‡∏û‡∏¥‡πà‡∏° NEXT_PUBLIC_EMAILJS_SERVICE_ID
- [ ] ‡πÄ‡∏û‡∏¥‡πà‡∏° NEXT_PUBLIC_EMAILJS_TEMPLATE_ID
- [ ] ‡πÄ‡∏û‡∏¥‡πà‡∏° NEXT_PUBLIC_EMAILJS_PUBLIC_KEY
- [ ] Redeploy project
- [ ] ‡∏ó‡∏î‡∏™‡∏≠‡∏ö /api/ping
- [ ] ‡∏ó‡∏î‡∏™‡∏≠‡∏ö /api/runtime-check
- [ ] ‡∏ó‡∏î‡∏™‡∏≠‡∏ö admin login
- [ ] ‡∏ó‡∏î‡∏™‡∏≠‡∏ö toggle reserved

---

## üéØ ‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå‡∏ó‡∏µ‡πà‡∏Ñ‡∏≤‡∏î‡∏´‡∏ß‡∏±‡∏á

‡∏´‡∏•‡∏±‡∏á redeploy ‡πÄ‡∏™‡∏£‡πá‡∏à:

‚úÖ www.chiangmaiusedcar.com/api/ping ‚Üí 200 "pong"  
‚úÖ www.chiangmaiusedcar.com/api/runtime-check ‚Üí 200 { ok: true }  
‚úÖ Admin login ‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡πÑ‡∏î‡πâ  
‚úÖ Toggle reserved ‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡πÑ‡∏î‡πâ  
‚úÖ Analytics ‡∏£‡∏±‡∏ö string payload ‡πÑ‡∏î‡πâ

---

## üÜò ‡∏ñ‡πâ‡∏≤‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ

‡∏ñ‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏á redeploy ‡πÅ‡∏•‡πâ‡∏ß‡∏¢‡∏±‡∏á‡πÑ‡∏î‡πâ 500 Error:

1. ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£‡∏Ñ‡∏£‡∏ö 10 ‡∏ï‡∏±‡∏ß
2. ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å Environment = **Production**
3. ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤ Value ‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏ä‡πà‡∏≠‡∏á‡∏ß‡πà‡∏≤‡∏á‡∏ô‡∏≥‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏£‡∏∑‡∏≠‡∏ó‡πâ‡∏≤‡∏¢
4. ‡∏î‡∏π Function Logs ‡πÉ‡∏ô deployment ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏´‡∏≤ error message ‡∏ó‡∏µ‡πà‡πÅ‡∏ó‡πâ‡∏à‡∏£‡∏¥‡∏á
5. ‡∏•‡∏≠‡∏á **"Redeploy without cache"** ‡πÅ‡∏ó‡∏ô

---

## üìû ‡∏ï‡∏¥‡∏î‡∏õ‡∏±‡∏ç‡∏´‡∏≤?

‡∏ñ‡πâ‡∏≤‡∏ó‡∏≥‡∏ï‡∏≤‡∏°‡πÅ‡∏•‡πâ‡∏ß‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ ‡πÉ‡∏´‡πâ:

1. Screenshot ‡∏´‡∏ô‡πâ‡∏≤ Environment Variables
2. Screenshot Function Logs (error message)
3. ‡∏™‡πà‡∏á‡∏°‡∏≤‡πÉ‡∏´‡πâ‡∏ú‡∏°‡∏î‡∏π
