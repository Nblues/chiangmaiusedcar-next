<!doctype html>
<html lang="th">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Social Sharing Debug Tool - ‡∏Ñ‡∏£‡∏π‡∏´‡∏ô‡∏∂‡πà‡∏á‡∏£‡∏ñ‡∏™‡∏ß‡∏¢</title>
    <style>
      body {
        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
        margin: 40px;
      }
      .debug-container {
        max-width: 800px;
        margin: 0 auto;
      }
      .debug-section {
        background: #f8f9fa;
        padding: 20px;
        margin: 20px 0;
        border-radius: 8px;
        border-left: 4px solid #007bff;
      }
      .debug-title {
        color: #007bff;
        font-weight: bold;
        margin-bottom: 10px;
      }
      input[type='url'] {
        width: 100%;
        padding: 12px;
        border: 1px solid #ddd;
        border-radius: 4px;
        margin: 10px 0;
      }
      button {
        background: #007bff;
        color: white;
        padding: 12px 24px;
        border: none;
        border-radius: 4px;
        cursor: pointer;
      }
      button:hover {
        background: #0056b3;
      }
      .preview {
        border: 1px solid #ddd;
        padding: 15px;
        margin: 15px 0;
        border-radius: 8px;
        background: white;
      }
      .meta-info {
        font-family: monospace;
        background: #f1f3f4;
        padding: 10px;
        border-radius: 4px;
        margin: 5px 0;
      }
      .error {
        color: #dc3545;
        background: #f8d7da;
        border-color: #f5c6cb;
      }
      .success {
        color: #155724;
        background: #d4edda;
        border-color: #c3e6cb;
      }
      .warning {
        color: #856404;
        background: #fff3cd;
        border-color: #ffeaa7;
      }
    </style>
  </head>
  <body>
    <div class="debug-container">
      <h1>üîç Social Sharing Debug Tool</h1>
      <p>‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏°‡∏∑‡∏≠‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡πÅ‡∏ä‡∏£‡πå‡∏•‡∏¥‡πâ‡∏á‡∏Ñ‡πå‡∏£‡∏ñ‡∏¢‡∏ô‡∏ï‡πå‡πÉ‡∏ô‡πÇ‡∏ã‡πÄ‡∏ä‡∏µ‡∏¢‡∏•‡∏°‡∏µ‡πÄ‡∏î‡∏µ‡∏¢</p>

      <div class="debug-section">
        <div class="debug-title">üìã ‡∏ó‡∏î‡∏™‡∏≠‡∏ö URL</div>
        <input type="url" id="testUrl" placeholder="https://chiangmaiusedcar.com/car/example-car" />
        <button onclick="testSocialSharing()">‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡πÅ‡∏ä‡∏£‡πå</button>
      </div>

      <div class="debug-section">
        <div class="debug-title">üîó ‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏°‡∏∑‡∏≠‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö Social Media</div>
        <div>
          <button onclick="openFacebookDebugger()">Facebook Debugger</button>
          <button onclick="openTwitterValidator()">Twitter Card Validator</button>
          <button onclick="openLinkedInInspector()">LinkedIn Post Inspector</button>
        </div>
      </div>

      <div id="results"></div>

      <div class="debug-section">
        <div class="debug-title">üì± ‡πÅ‡∏û‡∏•‡∏ï‡∏ü‡∏≠‡∏£‡πå‡∏°‡∏¢‡∏≠‡∏î‡∏ô‡∏¥‡∏¢‡∏°‡πÉ‡∏ô‡πÑ‡∏ó‡∏¢</div>
        <ul>
          <li><strong>Facebook:</strong> ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö og:title, og:description, og:image</li>
          <li><strong>LINE:</strong> ‡πÉ‡∏ä‡πâ Open Graph tags ‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ö Facebook</li>
          <li><strong>WhatsApp:</strong> ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö og:image ‡πÅ‡∏•‡∏∞ og:title</li>
          <li><strong>Messenger:</strong> ‡πÉ‡∏ä‡πâ Facebook Open Graph</li>
          <li><strong>TikTok:</strong> ‡πÅ‡∏™‡∏î‡∏á‡∏à‡∏≤‡∏Å og:title ‡πÅ‡∏•‡∏∞ og:description</li>
        </ul>
      </div>

      <div class="debug-section">
        <div class="debug-title">üõ†Ô∏è ‡∏ß‡∏¥‡∏ò‡∏µ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ</div>
        <div class="meta-info">
          <strong>1. ‡∏£‡∏π‡∏õ‡πÑ‡∏°‡πà‡πÅ‡∏™‡∏î‡∏á:</strong><br />
          - ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö URL ‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û‡πÄ‡∏õ‡πá‡∏ô absolute URL (https://...)<br />
          - ‡∏Ç‡∏ô‡∏≤‡∏î‡∏£‡∏π‡∏õ 1200x630px ‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Facebook<br />
          - ‡πÉ‡∏ä‡πâ‡πÑ‡∏ü‡∏•‡πå .webp ‡∏´‡∏£‡∏∑‡∏≠ .jpg<br /><br />

          <strong>2. ‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏†‡∏≤‡∏©‡∏≤‡∏ï‡πà‡∏≤‡∏á‡∏î‡∏≤‡∏ß:</strong><br />
          - ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ lang="th" ‡πÉ‡∏ô html tag<br />
          - ‡πÉ‡∏ä‡πâ UTF-8 encoding<br />
          - ‡πÄ‡∏û‡∏¥‡πà‡∏° meta charset="UTF-8"<br /><br />

          <strong>3. ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏°‡πà‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï:</strong><br />
          - ‡πÉ‡∏ä‡πâ Facebook Debugger ‡πÄ‡∏û‡∏∑‡πà‡∏≠ refresh cache<br />
          - ‡πÄ‡∏û‡∏¥‡πà‡∏° timestamp ‡πÉ‡∏ô URL ‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û<br />
          - ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö cache-control headers
        </div>
      </div>
    </div>

    <script>
      function testSocialSharing() {
        const url = document.getElementById('testUrl').value;
        if (!url) {
          alert('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÉ‡∏™‡πà URL');
          return;
        }

        const resultsDiv = document.getElementById('results');
        resultsDiv.innerHTML =
          '<div class="debug-section"><div class="debug-title">‚è≥ ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ó‡∏î‡∏™‡∏≠‡∏ö...</div></div>';

        // Simulate social media preview
        fetch(url)
          .then(response => response.text())
          .then(html => {
            const parser = new DOMParser();
            const doc = parser.parseFromString(html, 'text/html');

            const ogTitle = doc.querySelector('meta[property="og:title"]')?.content || '‡πÑ‡∏°‡πà‡∏û‡∏ö';
            const ogDescription =
              doc.querySelector('meta[property="og:description"]')?.content || '‡πÑ‡∏°‡πà‡∏û‡∏ö';
            const ogImage = doc.querySelector('meta[property="og:image"]')?.content || '‡πÑ‡∏°‡πà‡∏û‡∏ö';
            const ogType = doc.querySelector('meta[property="og:type"]')?.content || 'website';
            const ogUrl = doc.querySelector('meta[property="og:url"]')?.content || url;

            const twitterTitle =
              doc.querySelector('meta[name="twitter:title"]')?.content || ogTitle;
            const twitterDescription =
              doc.querySelector('meta[name="twitter:description"]')?.content || ogDescription;
            const twitterImage =
              doc.querySelector('meta[name="twitter:image"]')?.content || ogImage;

            resultsDiv.innerHTML = `
                        <div class="debug-section success">
                            <div class="debug-title">‚úÖ ‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡∏ó‡∏î‡∏™‡∏≠‡∏ö</div>
                            
                            <div class="preview">
                                <h3>üîç Facebook/LINE/WhatsApp Preview</h3>
                                <div class="meta-info">
                                    <strong>Title:</strong> ${ogTitle}<br>
                                    <strong>Description:</strong> ${ogDescription}<br>
                                    <strong>Image:</strong> ${ogImage}<br>
                                    <strong>Type:</strong> ${ogType}<br>
                                    <strong>URL:</strong> ${ogUrl}
                                </div>
                                ${ogImage !== '‡πÑ‡∏°‡πà‡∏û‡∏ö' ? `<img src="${ogImage}" style="max-width: 300px; margin-top: 10px;" onerror="this.src='data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzAwIiBoZWlnaHQ9IjE1MCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSIjZGRkIi8+PHRleHQgeD0iNTAlIiB5PSI1MCUiIGZvbnQtZmFtaWx5PSJBcmlhbCIgZm9udC1zaXplPSIxNCIgZmlsbD0iIzk5OSIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZHk9Ii4zZW0iPkltYWdlIE5vdCBGb3VuZDwvdGV4dD48L3N2Zz4='" />` : ''}
                            </div>

                            <div class="preview">
                                <h3>üê¶ Twitter Preview</h3>
                                <div class="meta-info">
                                    <strong>Title:</strong> ${twitterTitle}<br>
                                    <strong>Description:</strong> ${twitterDescription}<br>
                                    <strong>Image:</strong> ${twitterImage}
                                </div>
                            </div>
                        </div>
                    `;
          })
          .catch(error => {
            resultsDiv.innerHTML = `
                        <div class="debug-section error">
                            <div class="debug-title">‚ùå ‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î</div>
                            <div>‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏≤‡∏Å URL ‡πÑ‡∏î‡πâ: ${error.message}</div>
                        </div>
                    `;
          });
      }

      function openFacebookDebugger() {
        const url = document.getElementById('testUrl').value || 'https://chiangmaiusedcar.com';
        window.open(
          `https://developers.facebook.com/tools/debug/?q=${encodeURIComponent(url)}`,
          '_blank'
        );
      }

      function openTwitterValidator() {
        const url = document.getElementById('testUrl').value || 'https://chiangmaiusedcar.com';
        window.open(
          `https://cards-dev.twitter.com/validator?url=${encodeURIComponent(url)}`,
          '_blank'
        );
      }

      function openLinkedInInspector() {
        const url = document.getElementById('testUrl').value || 'https://chiangmaiusedcar.com';
        window.open(
          `https://www.linkedin.com/post-inspector/inspect/${encodeURIComponent(url)}`,
          '_blank'
        );
      }

      // Auto-fill with current domain if on localhost/dev
      window.addEventListener('load', () => {
        if (location.hostname === 'localhost' || location.hostname.includes('vercel')) {
          document.getElementById('testUrl').value =
            `${location.protocol}//${location.host}/car/example`;
        }
      });
    </script>
  </body>
</html>
