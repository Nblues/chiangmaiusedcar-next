# ‡∏™‡∏£‡∏∏‡∏õ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡πÅ‡∏•‡∏∞‡πÅ‡∏ô‡∏ß‡∏ó‡∏≤‡∏á‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç

**‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà:** 20 ‡∏ï‡∏∏‡∏•‡∏≤‡∏Ñ‡∏° 2025

## üéØ ‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏´‡∏•‡∏±‡∏Å

### 1. ‡∏õ‡∏∏‡πà‡∏° Toggle ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏à‡∏≠‡∏á‡∏£‡∏ñ ‡∏Å‡∏î‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡πÉ‡∏ô Production

- **‡∏™‡∏≤‡πÄ‡∏´‡∏ï‡∏∏:** Deployment Protection ‡∏Ç‡∏≠‡∏á Vercel ‡πÄ‡∏õ‡∏¥‡∏î‡∏≠‡∏¢‡∏π‡πà
- **‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç:** ‚úÖ ‡∏õ‡∏¥‡∏î Deployment Protection ‡πÅ‡∏•‡πâ‡∏ß
- **‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞:** ‚úÖ ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÄ‡∏™‡∏£‡πá‡∏à‡πÅ‡∏•‡πâ‡∏ß

### 2. Vercel KV ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡πÑ‡∏î‡πâ‡πÉ‡∏ô Development ‡πÅ‡∏ï‡πà‡πÉ‡∏ô Production ‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ

- **‡∏™‡∏≤‡πÄ‡∏´‡∏ï‡∏∏:** Environment variables ‡πÑ‡∏°‡πà‡πÇ‡∏´‡∏•‡∏î‡πÉ‡∏ô deployment ‡πÉ‡∏´‡∏°‡πà
- **‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç:** ‚úÖ ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡πÅ‡∏•‡πâ‡∏ß KV environment variables ‡∏°‡∏µ‡∏Ñ‡∏£‡∏ö
- **‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞:** ‚úÖ KV ‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡πÑ‡∏î‡πâ‡πÅ‡∏•‡πâ‡∏ß (‡∏ó‡∏î‡∏™‡∏≠‡∏ö /api/debug/kv-check ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à)

### 3. GitHub Webhook ‡∏ó‡∏µ‡πà‡πÄ‡∏™‡∏µ‡∏¢

- **‡∏™‡∏≤‡πÄ‡∏´‡∏ï‡∏∏:** Webhook ‡∏Ç‡∏≠‡∏á CodeGPT ‡∏™‡πà‡∏á 404 error
- **‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç:** ‚úÖ ‡πÉ‡∏ä‡πâ GitHub API ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡πÅ‡∏•‡πâ‡∏ß - ‡πÑ‡∏°‡πà‡∏°‡∏µ webhook ‡πÉ‡∏î‡πÜ ‡πÄ‡∏•‡∏¢
- **‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞:** ‚ö†Ô∏è ‡πÑ‡∏°‡πà‡∏°‡∏µ Vercel webhook (‡∏ï‡πâ‡∏≠‡∏á‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡πÉ‡∏´‡∏°‡πà)

### 4. Vercel Deployment ‡∏•‡πâ‡∏°‡πÄ‡∏´‡∏•‡∏ß‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î

- **‡∏™‡∏≤‡πÄ‡∏´‡∏ï‡∏∏:** Vercel Internal Error ‡πÄ‡∏°‡∏∑‡πà‡∏≠ deploy
- **‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏° error:** "An unexpected error happened when running this build"
- **‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞:** ‚ùå ‡∏õ‡∏±‡∏ç‡∏´‡∏≤ Vercel infrastructure

## üìä Deployment ‡∏ó‡∏µ‡πà‡∏ó‡∏≥‡∏á‡∏≤‡∏ô

### ‚úÖ Deployment ‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡πÑ‡∏î‡πâ:

```
URL: https://chiangmaiusedcar-setup-7pkehnxno-chiangmaiusedcars-projects.vercel.app
Age: 1 hour+
Status: Ready
Duration: 1m
Code: ‡∏Å‡πà‡∏≠‡∏ô‡∏Å‡∏≤‡∏£‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç toggle button (‡∏¢‡∏±‡∏á bug)
```

## üîß ‡∏Å‡∏≤‡∏£‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏ó‡∏µ‡πà‡∏ó‡∏≥‡πÅ‡∏•‡πâ‡∏ß (‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô Git ‡πÅ‡∏ï‡πà‡∏¢‡∏±‡∏á deploy ‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ)

### Commit: `06544c3` - Toggle Button Fix

**‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÅ‡∏õ‡∏•‡∏á:**

1. ‡πÅ‡∏ó‡∏ô‡∏ó‡∏µ‡πà `<button>` ‡∏î‡πâ‡∏ß‡∏¢ `<label>` + hidden `<checkbox>`
2. ‡πÉ‡∏ä‡πâ `onChange` event ‡πÅ‡∏ó‡∏ô `onClick` (reliable ‡∏Å‡∏ß‡πà‡∏≤)
3. ‡πÄ‡∏û‡∏¥‡πà‡∏° `aria-label` ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö accessibility
4. Custom styling ‡∏¢‡∏±‡∏á‡∏Ñ‡∏á‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡πÄ‡∏î‡∏¥‡∏° (green/red toggle)

**‡πÑ‡∏ü‡∏•‡πå‡∏ó‡∏µ‡πà‡πÅ‡∏Å‡πâ:**

- `pages/admin/cars.jsx`

**‡∏ó‡∏î‡∏™‡∏≠‡∏ö:**

- ‚úÖ Local build ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à
- ‚ùå Deploy ‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡πÄ‡∏û‡∏£‡∏≤‡∏∞ Vercel internal error

## üöÄ ‡πÅ‡∏ô‡∏ß‡∏ó‡∏≤‡∏á‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏ó‡∏µ‡πà‡πÄ‡∏´‡∏•‡∏∑‡∏≠

### ‡∏ß‡∏¥‡∏ò‡∏µ‡∏ó‡∏µ‡πà 1: ‡∏£‡∏≠ Vercel ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç Infrastructure (‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥)

```bash
# ‡∏£‡∏≠ 1-2 ‡∏ä‡∏±‡πà‡∏ß‡πÇ‡∏°‡∏á ‡πÅ‡∏•‡πâ‡∏ß‡∏•‡∏≠‡∏á deploy ‡πÉ‡∏´‡∏°‡πà
cd "c:\project davelopper\chiangmaiusedcar-setup"
vercel --prod --yes
```

### ‡∏ß‡∏¥‡∏ò‡∏µ‡∏ó‡∏µ‡πà 2: Redeploy ‡∏ú‡πà‡∏≤‡∏ô Dashboard

1. ‡πÑ‡∏õ‡∏ó‡∏µ‡πà https://vercel.com/chiangmaiusedcars-projects/chiangmaiusedcar-setup/deployments
2. ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å deployment ‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î‡∏ó‡∏µ‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à
3. ‡∏Ñ‡∏•‡∏¥‡∏Å "..." ‚Üí "Redeploy"
4. ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å "Use existing Build Cache"

### ‡∏ß‡∏¥‡∏ò‡∏µ‡∏ó‡∏µ‡πà 3: Manual Deploy ‡∏ú‡πà‡∏≤‡∏ô GitHub

1. ‡∏™‡∏£‡πâ‡∏≤‡∏á Pull Request ‡πÉ‡∏´‡∏°‡πà
2. Merge ‡πÄ‡∏Ç‡πâ‡∏≤ master
3. ‡∏î‡∏π‡∏ß‡πà‡∏≤ Vercel auto-deploy ‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà

### ‡∏ß‡∏¥‡∏ò‡∏µ‡∏ó‡∏µ‡πà 4: ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ Git Integration ‡πÉ‡∏´‡∏°‡πà

**‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏Ñ‡∏∑‡∏≠:** ‡πÑ‡∏°‡πà‡∏°‡∏µ webhook ‡πÉ‡∏ô GitHub ‡πÄ‡∏•‡∏¢

**‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô:**

1. ‡πÑ‡∏õ‡∏ó‡∏µ‡πà https://vercel.com/chiangmaiusedcars-projects/chiangmaiusedcar-setup/settings/git
2. Disconnect Git Repository
3. Connect Git Repository ‡πÉ‡∏´‡∏°‡πà
4. ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å `Nblues/chiangmaiusedcar-next`
5. ‡∏ï‡∏±‡πâ‡∏á Production Branch = `master`
6. Vercel ‡∏à‡∏∞‡∏™‡∏£‡πâ‡∏≤‡∏á webhook ‡πÉ‡∏ô GitHub ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥

## üìù Scripts ‡∏ó‡∏µ‡πà‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÑ‡∏ß‡πâ

### 1. GitHub Webhook Management

```powershell
$env:GITHUB_TOKEN = 'YOUR_TOKEN'
.\scripts\setup-github-webhook.ps1
```

### 2. Vercel Git Integration

```powershell
$env:VERCEL_TOKEN = 'YOUR_TOKEN'
.\scripts\setup-vercel-git.ps1
```

## ‚úÖ ‡∏™‡∏£‡∏∏‡∏õ‡∏™‡∏¥‡πà‡∏á‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡πÑ‡∏î‡πâ

1. ‚úÖ **KV Database** - ‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡πÑ‡∏î‡πâ‡∏ó‡∏±‡πâ‡∏á dev ‡πÅ‡∏•‡∏∞ production
2. ‚úÖ **Deployment Protection** - ‡∏õ‡∏¥‡∏î‡πÅ‡∏•‡πâ‡∏ß API ‡πÄ‡∏Ç‡πâ‡∏≤‡∏ñ‡∏∂‡∏á‡πÑ‡∏î‡πâ
3. ‚úÖ **Local Development** - Build ‡πÅ‡∏•‡∏∞ run ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à
4. ‚úÖ **Git Repository** - Push commits ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à
5. ‚úÖ **Code Quality** - Lint ‡πÅ‡∏•‡∏∞ type-check ‡∏ú‡πà‡∏≤‡∏ô

## ‚ùå ‡∏™‡∏¥‡πà‡∏á‡∏ó‡∏µ‡πà‡∏¢‡∏±‡∏á‡∏°‡∏µ‡∏õ‡∏±‡∏ç‡∏´‡∏≤

1. ‚ùå **Vercel Deployment** - Internal error ‡∏ó‡∏∏‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á
2. ‚ùå **GitHub Webhook** - ‡πÑ‡∏°‡πà‡∏°‡∏µ‡πÄ‡∏•‡∏¢ (‡∏ï‡πâ‡∏≠‡∏á‡∏ï‡∏±‡πâ‡∏á‡πÉ‡∏´‡∏°‡πà)
3. ‚ùå **Auto-deploy** - ‡πÑ‡∏°‡πà‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡πÄ‡∏û‡∏£‡∏≤‡∏∞‡πÑ‡∏°‡πà‡∏°‡∏µ webhook
4. ‚ùå **Toggle Button Fix** - ‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô Git ‡πÅ‡∏ï‡πà‡∏¢‡∏±‡∏á deploy ‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ

## üéØ ‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥: ‡πÉ‡∏ä‡πâ Deployment ‡πÄ‡∏Å‡πà‡∏≤‡∏Å‡πà‡∏≠‡∏ô

‡πÄ‡∏ô‡∏∑‡πà‡∏≠‡∏á‡∏à‡∏≤‡∏Å Vercel ‡∏°‡∏µ‡∏õ‡∏±‡∏ç‡∏´‡∏≤ ‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡πÉ‡∏´‡πâ:

1. ‡πÉ‡∏ä‡πâ deployment `7pkehnxno` ‡πÑ‡∏õ‡∏Å‡πà‡∏≠‡∏ô (‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡πÑ‡∏î‡πâ)
2. ‡πÅ‡∏Å‡πâ‡∏õ‡∏±‡∏ç‡∏´‡∏≤ toggle button ‡∏î‡πâ‡∏ß‡∏¢‡∏ß‡∏¥‡∏ò‡∏µ‡∏≠‡∏∑‡πà‡∏ô (hotfix)
3. ‡∏£‡∏≠ Vercel ‡πÅ‡∏Å‡πâ‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡πÅ‡∏•‡πâ‡∏ß‡∏Ñ‡πà‡∏≠‡∏¢ deploy ‡πÇ‡∏Ñ‡πâ‡∏î‡πÉ‡∏´‡∏°‡πà

## üìû ‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠ Vercel Support

‡∏ñ‡πâ‡∏≤‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏´‡∏≤‡∏¢ ‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡πÉ‡∏´‡πâ‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠:

- https://vercel.com/help
- Error ID ‡∏à‡∏≤‡∏Å deployment logs

---

**‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î:** 20 ‡∏ï‡∏∏‡∏•‡∏≤‡∏Ñ‡∏° 2025, 15:00 ICT
