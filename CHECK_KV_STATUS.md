# üîç ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ KV - ‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡πÉ‡∏ä‡πâ Vercel CLI

## ‚ö†Ô∏è ‡∏õ‡∏±‡∏ç‡∏´‡∏≤: Vercel CLI ‡πÑ‡∏°‡πà‡∏ó‡∏≥‡∏á‡∏≤‡∏ô

npm ‡πÅ‡∏•‡∏∞ npx ‡∏°‡∏µ‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡πÉ‡∏ô‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏ô‡∏µ‡πâ ‡∏ó‡∏≥‡πÉ‡∏´‡πâ Vercel CLI ‡πÉ‡∏ä‡πâ‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ

## ‚úÖ ‡∏ß‡∏¥‡∏ò‡∏µ‡πÅ‡∏Å‡πâ: ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ú‡πà‡∏≤‡∏ô Vercel Dashboard ‡πÅ‡∏ó‡∏ô

### üéØ ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ó‡∏µ‡πà 1: ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö KV Environment Variables

1. **‡πÄ‡∏õ‡∏¥‡∏î‡∏•‡∏¥‡∏á‡∏Å‡πå‡∏ô‡∏µ‡πâ**: https://vercel.com/nblues/chiangmaiusedcar-next/settings/environment-variables

2. **‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤**: `KV_REST_API` ‡πÉ‡∏ô‡∏ä‡πà‡∏≠‡∏á‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤

3. **‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡∏°‡∏µ‡∏ó‡∏±‡πâ‡∏á 3 ‡∏ï‡∏±‡∏ß‡∏ô‡∏µ‡πâ‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà:**

   - ‚úÖ `KV_REST_API_URL`
   - ‚úÖ `KV_REST_API_TOKEN`
   - ‚úÖ `KV_REST_API_READ_ONLY_TOKEN`

4. **‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö Environment ‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏ï‡∏±‡∏ß:**
   - ‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ **Production** ‚úÖ (‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î!)
   - ‡∏≠‡∏≤‡∏à‡∏°‡∏µ Development, Preview (‡πÑ‡∏°‡πà‡∏à‡∏≥‡πÄ‡∏õ‡πá‡∏ô)

---

### üéØ ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ó‡∏µ‡πà 2: ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö KV Database Connection

1. **‡πÄ‡∏õ‡∏¥‡∏î‡∏•‡∏¥‡∏á‡∏Å‡πå‡∏ô‡∏µ‡πâ**: https://vercel.com/nblues/chiangmaiusedcar-next/stores

2. **‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤**:

   - ‡∏°‡∏µ Database ‡∏ä‡∏∑‡πà‡∏≠ **car-status-db** ‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà
   - Status: **Active** (‡∏™‡∏µ‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ß)
   - Connected to: **chiangmaiusedcar-next** (Production ‚úÖ)

3. **‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡∏°‡∏µ ‡∏´‡∏£‡∏∑‡∏≠ Status ‡πÄ‡∏õ‡πá‡∏ô Inactive**:
   - ‡∏Ñ‡∏•‡∏¥‡∏Å‡∏ó‡∏µ‡πà database
   - ‡πÑ‡∏õ‡∏ó‡∏µ‡πà‡πÅ‡∏ñ‡∏ö **Settings**
   - ‡∏Ñ‡∏•‡∏¥‡∏Å **Connect Project**
   - ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å **chiangmaiusedcar-next**
   - ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å Environments: ‚úÖ Production, ‚úÖ Preview, ‚úÖ Development
   - ‡∏Ñ‡∏•‡∏¥‡∏Å **Connect**

---

### üéØ ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ó‡∏µ‡πà 3: ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö Production Deployment

1. **‡πÄ‡∏õ‡∏¥‡∏î‡∏•‡∏¥‡∏á‡∏Å‡πå‡∏ô‡∏µ‡πâ**: https://vercel.com/nblues/chiangmaiusedcar-next/deployments

2. **‡∏´‡∏≤ deployment ‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î** (commit: "chore: redeploy to activate KV...")

3. **‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞**:

   - üü° **Building** ‚Üí ‡∏£‡∏≠‡∏≠‡∏µ‡∏Å 1-2 ‡∏ô‡∏≤‡∏ó‡∏µ
   - üü¢ **Ready** ‚Üí ‡∏î‡∏µ‡∏°‡∏≤‡∏Å! ‡πÑ‡∏õ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ó‡∏µ‡πà 4
   - üî¥ **Error** ‚Üí ‡∏Ñ‡∏•‡∏¥‡∏Å‡∏î‡∏π error logs

4. **‡∏ñ‡πâ‡∏≤‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ Ready ‡πÅ‡∏•‡πâ‡∏ß**:
   - ‡∏Ñ‡∏•‡∏¥‡∏Å‡∏ó‡∏µ‡πà deployment ‡∏ô‡∏±‡πâ‡∏ô
   - ‡πÑ‡∏õ‡∏ó‡∏µ‡πà‡πÅ‡∏ñ‡∏ö **Environment Variables**
   - ‡∏î‡∏π‡∏ß‡πà‡∏≤‡∏°‡∏µ `KV_REST_API_*` ‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà

---

### üéØ ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ó‡∏µ‡πà 4: ‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤ Production ‡∏£‡∏±‡∏ö KV Variables ‡πÅ‡∏•‡πâ‡∏ß‡∏´‡∏£‡∏∑‡∏≠‡∏¢‡∏±‡∏á

1. **‡πÄ‡∏õ‡∏¥‡∏î‡∏•‡∏¥‡∏á‡∏Å‡πå‡∏ô‡∏µ‡πâ‡πÉ‡∏ô‡πÄ‡∏ö‡∏£‡∏≤‡∏ß‡πå‡πÄ‡∏ã‡∏≠‡∏£‡πå**: https://www.chiangmaiusedcar.com/api/debug/kv-check

2. **‡∏î‡∏π‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå**:

   **‚úÖ ‡∏ñ‡πâ‡∏≤‡∏Ç‡∏∂‡πâ‡∏ô‡πÅ‡∏ö‡∏ö‡∏ô‡∏µ‡πâ = ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à:**

   ```json
   {
     "success": true,
     "kvReady": true,
     "envCheck": {
       "KV_REST_API_URL": true,
       "KV_REST_API_TOKEN": true,
       "KV_REST_API_READ_ONLY_TOKEN": true
     },
     "message": "‚úÖ KV environment variables are ready"
   }
   ```

   ‚Üí **‡πÑ‡∏õ‡∏ó‡∏î‡∏™‡∏≠‡∏ö admin toggle ‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏¢!**

   **‚ùå ‡∏ñ‡πâ‡∏≤‡∏Ç‡∏∂‡πâ‡∏ô‡πÅ‡∏ö‡∏ö‡∏ô‡∏µ‡πâ = ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏û‡∏£‡πâ‡∏≠‡∏°:**

   ```json
   {
     "success": true,
     "kvReady": false,
     "envCheck": {
       "KV_REST_API_URL": false,
       "KV_REST_API_TOKEN": false,
       "KV_REST_API_READ_ONLY_TOKEN": false
     },
     "message": "‚ö†Ô∏è KV environment variables are missing"
   }
   ```

   ‚Üí **‡∏ï‡πâ‡∏≠‡∏á redeploy ‡πÉ‡∏´‡∏°‡πà** (‡∏î‡∏π‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ó‡∏µ‡πà 5)

---

### üéØ ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ó‡∏µ‡πà 5: Redeploy (‡∏ñ‡πâ‡∏≤ KV Variables ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏û‡∏£‡πâ‡∏≠‡∏°)

**‡∏ß‡∏¥‡∏ò‡∏µ‡∏ó‡∏µ‡πà 1: Redeploy ‡∏ú‡πà‡∏≤‡∏ô Dashboard (‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥)**

1. ‡πÑ‡∏õ‡∏ó‡∏µ‡πà: https://vercel.com/nblues/chiangmaiusedcar-next/deployments
2. ‡∏Ñ‡∏•‡∏¥‡∏Å‡∏ó‡∏µ‡πà deployment ‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î
3. ‡∏Ñ‡∏•‡∏¥‡∏Å‡∏õ‡∏∏‡πà‡∏° **"Redeploy"** ‡∏î‡πâ‡∏≤‡∏ô‡∏ö‡∏ô‡∏Ç‡∏ß‡∏≤
4. ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å **"Redeploy with existing Build Cache"** (‡∏ñ‡πâ‡∏≤‡∏°‡∏µ‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏∑‡∏≠‡∏Å)
5. ‡∏Ñ‡∏•‡∏¥‡∏Å **"Redeploy"**
6. ‡∏£‡∏≠ 2-3 ‡∏ô‡∏≤‡∏ó‡∏µ ‡πÅ‡∏•‡πâ‡∏ß‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏õ‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏ó‡∏µ‡πà‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ó‡∏µ‡πà 4

**‡∏ß‡∏¥‡∏ò‡∏µ‡∏ó‡∏µ‡πà 2: Push Commit ‡πÉ‡∏´‡∏°‡πà**

‡∏£‡∏±‡∏ô‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏ô‡∏µ‡πâ‡πÉ‡∏ô PowerShell:

```powershell
git commit --allow-empty -m "chore: force redeploy for KV env vars" --no-verify
git push origin master
```

---

## üìä ‡∏™‡∏£‡∏∏‡∏õ Checklist

‡∏ó‡∏≥‡∏ï‡∏≤‡∏°‡∏•‡∏≥‡∏î‡∏±‡∏ö‡∏ô‡∏µ‡πâ:

- [ ] 1. ‡πÄ‡∏ä‡πá‡∏Ñ Environment Variables ‡∏ß‡πà‡∏≤‡∏°‡∏µ `KV_REST_API_*` ‡∏Ñ‡∏£‡∏ö 3 ‡∏ï‡∏±‡∏ß ‡∏û‡∏£‡πâ‡∏≠‡∏° Production
- [ ] 2. ‡πÄ‡∏ä‡πá‡∏Ñ Stores ‡∏ß‡πà‡∏≤ `car-status-db` connected ‡∏Å‡∏±‡∏ö project
- [ ] 3. ‡πÄ‡∏ä‡πá‡∏Ñ Deployments ‡∏ß‡πà‡∏≤ build ‡πÄ‡∏™‡∏£‡πá‡∏à‡πÅ‡∏•‡πâ‡∏ß (Ready)
- [ ] 4. ‡πÄ‡∏õ‡∏¥‡∏î `/api/debug/kv-check` ‡∏î‡∏π‡∏ß‡πà‡∏≤ `kvReady: true` ‡∏´‡∏£‡∏∑‡∏≠‡∏¢‡∏±‡∏á
- [ ] 5. ‡∏ñ‡πâ‡∏≤ false ‚Üí Redeploy ‡∏ú‡πà‡∏≤‡∏ô Dashboard
- [ ] 6. ‡∏£‡∏≠ deployment ‡πÄ‡∏™‡∏£‡πá‡∏à ‡πÅ‡∏•‡πâ‡∏ß‡πÄ‡∏ä‡πá‡∏Ñ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô 4 ‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á
- [ ] 7. ‡∏ñ‡πâ‡∏≤ `kvReady: true` ‚Üí ‡∏ó‡∏î‡∏™‡∏≠‡∏ö admin toggle

---

## üéØ ‡πÄ‡∏°‡∏∑‡πà‡∏≠ KV ‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÅ‡∏•‡πâ‡∏ß

‡∏ó‡∏î‡∏™‡∏≠‡∏ö admin:

1. ‡πÄ‡∏Ç‡πâ‡∏≤: https://www.chiangmaiusedcar.com/admin/cars
2. Login
3. ‡∏Å‡∏î‡πÄ‡∏õ‡∏¥‡∏î/‡∏õ‡∏¥‡∏î‡∏à‡∏≠‡∏á‡∏£‡∏ñ
4. **Refresh (F5)**
5. **‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏ï‡πâ‡∏≠‡∏á‡∏Ñ‡∏á‡∏ó‡∏µ‡πà** ‚úÖ

---

## üÜò ‡∏ñ‡πâ‡∏≤‡∏¢‡∏±‡∏á‡∏°‡∏µ‡∏õ‡∏±‡∏ç‡∏´‡∏≤

‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏´‡∏•‡πà‡∏≤‡∏ô‡∏µ‡πâ‡∏°‡∏≤:

1. Screenshot ‡∏´‡∏ô‡πâ‡∏≤ Environment Variables (‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏´‡πá‡∏ô KV*REST_API*\*)
2. Screenshot ‡∏´‡∏ô‡πâ‡∏≤ Stores (‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏´‡πá‡∏ô car-status-db connected)
3. ‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå‡∏à‡∏≤‡∏Å `/api/debug/kv-check`
4. Error message ‡∏à‡∏≤‡∏Å admin toggle (‡∏ñ‡πâ‡∏≤‡∏°‡∏µ)
